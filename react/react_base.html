<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>基本语法规则 | 云深不知处</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="JavaScript 学习">
    
    <link rel="preload" href="/learn-repo/assets/css/0.styles.52a94e0b.css" as="style"><link rel="preload" href="/learn-repo/assets/js/app.1c28de55.js" as="script"><link rel="preload" href="/learn-repo/assets/js/3.14e5b99f.js" as="script"><link rel="preload" href="/learn-repo/assets/js/1.7fd08403.js" as="script"><link rel="preload" href="/learn-repo/assets/js/15.69afa17f.js" as="script"><link rel="prefetch" href="/learn-repo/assets/js/10.e8885f8d.js"><link rel="prefetch" href="/learn-repo/assets/js/11.c18a558b.js"><link rel="prefetch" href="/learn-repo/assets/js/12.684d6508.js"><link rel="prefetch" href="/learn-repo/assets/js/13.bd047f6b.js"><link rel="prefetch" href="/learn-repo/assets/js/14.a8ce1ab1.js"><link rel="prefetch" href="/learn-repo/assets/js/16.c8e59fd7.js"><link rel="prefetch" href="/learn-repo/assets/js/17.6de4f02d.js"><link rel="prefetch" href="/learn-repo/assets/js/18.ba6d85cb.js"><link rel="prefetch" href="/learn-repo/assets/js/19.606dd913.js"><link rel="prefetch" href="/learn-repo/assets/js/20.bc9c3e6b.js"><link rel="prefetch" href="/learn-repo/assets/js/21.db516907.js"><link rel="prefetch" href="/learn-repo/assets/js/22.effcb5d1.js"><link rel="prefetch" href="/learn-repo/assets/js/23.5ce41381.js"><link rel="prefetch" href="/learn-repo/assets/js/4.35597f61.js"><link rel="prefetch" href="/learn-repo/assets/js/5.2d78a80a.js"><link rel="prefetch" href="/learn-repo/assets/js/6.920dc3bb.js"><link rel="prefetch" href="/learn-repo/assets/js/7.6c9ed832.js"><link rel="prefetch" href="/learn-repo/assets/js/8.dc793827.js"><link rel="prefetch" href="/learn-repo/assets/js/9.8138dceb.js">
    <link rel="stylesheet" href="/learn-repo/assets/css/0.styles.52a94e0b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-5bb33761><div data-v-5bb33761><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-5bb33761 data-v-5bb33761><h3 class="title" data-v-59e6cb88>云深不知处</h3> <p class="description" data-v-59e6cb88>JavaScript 学习</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2022
      </a></span></div></div> <div class="hide" data-v-5bb33761><header class="navbar" data-v-5bb33761><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/learn-repo/" class="home-link router-link-active"><!----> <span class="site-name">云深不知处</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/learn-repo/" class="nav-link"><i class="undefined"></i>
  Principal
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      Yunyue 的 JavaScript 博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/yunyuesyhz" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-5bb33761></div> <aside class="sidebar" data-v-5bb33761><div class="personal-info-wrapper" data-v-1fad0c41 data-v-5bb33761><!----> <!----> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>7</h3> <h6 data-v-1fad0c41>Articles</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>0</h3> <h6 data-v-1fad0c41>Tags</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/learn-repo/" class="nav-link"><i class="undefined"></i>
  Principal
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      Yunyue 的 JavaScript 博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/yunyuesyhz" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/learn-repo/basic/vue3" class="sidebar-heading clickable"><span>Vue基础</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/learn-repo/basic/vue3.html" class="sidebar-link">Vue3</a></li><li><a href="/learn-repo/basic/vue-life.html" class="sidebar-link">Vue生命周期</a></li><li><a href="/learn-repo/basic/vnode.html" class="sidebar-link">Vnode</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/learn-repo/vsrc/init" class="sidebar-heading clickable"><span>Vue源码</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/learn-repo/vsrc/init.html" class="sidebar-link">Vue初始化</a></li><li><a href="/learn-repo/vsrc/asyncupdate.html" class="sidebar-link">Vue异步更新</a></li><li><a href="/learn-repo/vsrc/globalapi.html" class="sidebar-link">Vue全局API</a></li><li><a href="/learn-repo/vsrc/insfunc.html" class="sidebar-link">Vue实例方法</a></li><li><a href="/learn-repo/vsrc/hook_event.html" class="sidebar-link">Vue Hook-Event</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/learn-repo/JS_basic/js_one" class="sidebar-heading clickable"><span>JS理解</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/learn-repo/JS_basic/js_one.html" class="sidebar-link">JS理解（上）</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/learn-repo/typescript/ts_base_1" class="sidebar-heading clickable"><span>TypeScript</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/learn-repo/typescript/ts_base_1.html" class="sidebar-link">TS First</a></li><li><a href="/learn-repo/typescript/ts_base_2.html" class="sidebar-link">TS Second</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/learn-repo/webpack/webpack_base" class="sidebar-heading clickable"><span>Webpack</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/learn-repo/webpack/webpack_base.html" class="sidebar-link">Webpack基础</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/learn-repo/react/react_base" class="sidebar-heading clickable open active"><span>React</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/learn-repo/react/react_base.html" aria-current="page" class="active sidebar-link">React 嗷~</a></li></ul></section></li><li><a href="/learn-repo/" aria-current="page" class="sidebar-link">欢迎学习</a></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-5bb33761><h3 class="title" data-v-59e6cb88></h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2022
      </a></span></div></div> <div data-v-5bb33761><div data-v-5bb33761><main class="page" style="padding-right:0;"><section style="display:;"><div class="page-title"><h1 class="title">基本语法规则</h1> <div data-v-8a445198><!----> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h2 id="基本语法规则"><a href="#基本语法规则" class="header-anchor">#</a> 基本语法规则</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token number">1.</span>定义虚拟<span class="token constant">DOM</span>时，不要写引号。
<span class="token number">2.</span>标签中混入<span class="token constant">JS</span>表达式时要用<span class="token punctuation">{</span><span class="token punctuation">}</span>。
<span class="token number">3.</span>样式的类名指定不要用<span class="token keyword">class</span>，要用className。
<span class="token number">4.</span>内联样式，要用style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token literal-property property">key</span><span class="token operator">:</span>value<span class="token punctuation">}</span><span class="token punctuation">}</span>的形式去写。
<span class="token number">5.</span>只有一个根标签
<span class="token number">6.</span>标签必须闭合
<span class="token number">7.</span><span class="token function">标签首字母</span>
<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">若小写字母开头，则将该标签转为html中同名元素，若html中无该标签对应的同名元素，则报错。</span>
<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>若大写字母开头，react就去渲染对应的组件，若组件没有定义，则报错。
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//1.创建虚拟DOM</span>
	<span class="token keyword">const</span> <span class="token constant">VDOM</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
                <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>h2 className<span class="token operator">=</span><span class="token string">&quot;title&quot;</span> id<span class="token operator">=</span><span class="token punctuation">{</span>myId<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>span style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&quot;white&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token string">&quot;29px&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
                            <span class="token punctuation">{</span>myData<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>h2 className<span class="token operator">=</span><span class="token string">&quot;title&quot;</span> id<span class="token operator">=</span><span class="token punctuation">{</span>myId<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>span style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&quot;white&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token string">&quot;29px&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
                            <span class="token punctuation">{</span>myData<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//2.渲染虚拟DOM到页面</span>
            ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token constant">VDOM</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 模拟数据</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Angular'</span><span class="token punctuation">,</span> <span class="token string">'React'</span><span class="token punctuation">,</span> <span class="token string">'Vue'</span><span class="token punctuation">]</span>
<span class="token comment">// 创建虚拟DOM</span>
<span class="token keyword">const</span> <span class="token constant">VDOM</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    	<span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
    		<span class="token punctuation">{</span>
                data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    				<span class="token keyword">return</span> <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
    	<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span>
<span class="token comment">// 渲染虚拟DOM到页面</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token constant">VDOM</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="定义组件"><a href="#定义组件" class="header-anchor">#</a> 定义组件</h2> <h4 id="函数式组件"><a href="#函数式组件" class="header-anchor">#</a> 函数式组件</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//1.创建函数式组件</span>
<span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//this是undefined，因为babel编译后开启了严格模式</span>
	<span class="token keyword">return</span> <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span><span class="token function">我是用函数定义的组件</span><span class="token punctuation">(</span>适用于【简单组件】的定义<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token comment">//2.渲染组件到页面		ReactDOM.render(&lt;MyComponent/&gt;,document.getElementById('test'))</span>
</code></pre></div><p>执行ReactDOM.render(....)之后，</p> <ul><li>React解析组件标签，找到了MyComponent组件</li> <li>发现该组件是使用函数定义的，随后调用该函数，将返回的虚拟DOM转化为真实DOM，随后呈现在页面中</li></ul> <h4 id="类式组件"><a href="#类式组件" class="header-anchor">#</a> 类式组件</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//1.创建类式组件</span>
<span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">//render是放在哪里的？—— MyComponent的原型对象上，供实例使用。</span>
	<span class="token comment">//render中的this是谁？—— MyComponent的实例对象 &lt;=&gt; MyComponent组件实例对象。</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'render中的this:'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span><span class="token function">我是用类定义的组件</span><span class="token punctuation">(</span>适用于【复杂组件】的定义<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//2.渲染组件到页面		ReactDOM.render(&lt;MyComponent/&gt;,document.getElementById('test'))</span>
</code></pre></div><p>执行ReactDOM.render(....)之后，</p> <ul><li>React解析组件标签，找到了MyComponent组件</li> <li>发现组件是使用类定义的，随后 new 出来该类的实例，并通过该实例调用原型上的render方法</li> <li>将render返回的虚拟DOM转为真实DOM，随后呈现在页面上</li></ul> <h3 id="组件实例三大属性"><a href="#组件实例三大属性" class="header-anchor">#</a> 组件实例三大属性</h3> <h4 id="state"><a href="#state" class="header-anchor">#</a> state</h4> <h5 id="类中this指向"><a href="#类中this指向" class="header-anchor">#</a> ！！！类中this指向</h5> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">{</span>
    <span class="token function">study</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
p1<span class="token punctuation">.</span><span class="token function">study</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// this指向实例对象</span>
<span class="token keyword">const</span> x <span class="token operator">=</span> p1<span class="token punctuation">.</span>study
<span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// this指向undefined 因为类中定义的所有方法都默认开启局部严格模式，所以当函数直接调用时 this 会指向 undefined</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Weather</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
                <span class="token comment">//构造器调用几次？ ———— 1次</span>
                <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;constructor&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">//初始化状态</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">isHot</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token literal-property property">wind</span><span class="token operator">:</span> <span class="token string">&quot;微风&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
                    <span class="token comment">//解决changeWeather中this指向问题</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>changeWeather <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeWeather</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token comment">//render调用几次？ ———— 1+n次 1是初始化的那次 n是状态更新的次数</span>
                <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;render&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">//读取状态</span>
                    <span class="token keyword">const</span> <span class="token punctuation">{</span> isHot<span class="token punctuation">,</span> wind <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
                    <span class="token keyword">return</span> <span class="token punctuation">(</span>
                        <span class="token operator">&lt;</span>h1 onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>changeWeather<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                            今天天气很<span class="token punctuation">{</span>isHot <span class="token operator">?</span> <span class="token string">&quot;炎热&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;凉爽&quot;</span><span class="token punctuation">}</span>，<span class="token punctuation">{</span>wind<span class="token punctuation">}</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
                    <span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token comment">//changeWeather调用几次？ ———— 点几次调几次</span>
                <span class="token function">changeWeather</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">//changeWeather放在哪里？ ———— Weather的原型对象上，供实例使用</span>
                    <span class="token comment">//由于changeWeather是作为onClick的回调，所以不是通过实例调用的，是直接调用</span>
                    <span class="token comment">//类中的方法默认开启了局部的严格模式，所以changeWeather中的this为undefined</span>

                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;changeWeather&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">//获取原来的isHot值</span>
                    <span class="token keyword">const</span> isHot <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isHot<span class="token punctuation">;</span>
                    <span class="token comment">//严重注意：状态必须通过setState进行更新,且更新是一种合并，不是替换。</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">isHot</span><span class="token operator">:</span> <span class="token operator">!</span>isHot <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                    <span class="token comment">//严重注意：状态(state)不可直接更改，下面这行就是直接更改！！！</span>
                    <span class="token comment">//this.state.isHot = !isHot //这是错误的写法</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//2.渲染组件到页面</span>
            ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Weather <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="props"><a href="#props" class="header-anchor">#</a> props</h4> <p>基本使用：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>			<span class="token comment">//创建组件</span>
            <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
                <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">const</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
                    <span class="token keyword">return</span> <span class="token punctuation">(</span>
                        <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>姓名：<span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>性别：<span class="token punctuation">{</span>sex<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>年龄：<span class="token punctuation">{</span>age <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
                    <span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//渲染组件到页面</span>
            ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
                <span class="token operator">&lt;</span>Person name<span class="token operator">=</span><span class="token string">&quot;jerry&quot;</span> age<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">19</span><span class="token punctuation">}</span> sex<span class="token operator">=</span><span class="token string">&quot;男&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
                document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;test1&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>对传入的props进行限制：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>		<span class="token comment">//创建组件</span>
		<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>

			<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token comment">//构造器是否接收props，是否传递给super，取决于：是否希望在构造器中通过this访问props</span>
				<span class="token comment">// console.log(props);</span>
				<span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'constructor'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">//对标签属性进行类型、必要性的限制</span>
			<span class="token keyword">static</span> propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">name</span><span class="token operator">:</span>PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span> <span class="token comment">//限制name必传，且为字符串</span>
				<span class="token literal-property property">sex</span><span class="token operator">:</span>PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span><span class="token comment">//限制sex为字符串</span>
				<span class="token literal-property property">age</span><span class="token operator">:</span>PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">,</span><span class="token comment">//限制age为数值</span>
			<span class="token punctuation">}</span>

			<span class="token comment">//指定默认标签属性值</span>
			<span class="token keyword">static</span> defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">sex</span><span class="token operator">:</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token comment">//sex默认值为男</span>
				<span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span> <span class="token comment">//age默认值为18</span>
			<span class="token punctuation">}</span>
			
			<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">const</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>sex<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
				<span class="token comment">//props是只读的</span>
				<span class="token comment">//this.props.name = 'jack' //此行代码会报错，因为props是只读的</span>
				<span class="token keyword">return</span> <span class="token punctuation">(</span>
					<span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>姓名：<span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>性别：<span class="token punctuation">{</span>sex<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>年龄：<span class="token punctuation">{</span>age<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
				<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token comment">//渲染组件到页面</span>
		ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Person name<span class="token operator">=</span><span class="token string">&quot;jerry&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'test1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>函数组件使用 props：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>		<span class="token comment">//创建组件</span>
		<span class="token keyword">function</span> <span class="token function">Person</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">const</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>sex<span class="token punctuation">}</span> <span class="token operator">=</span> props
			<span class="token keyword">return</span> <span class="token punctuation">(</span>
					<span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>姓名：<span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>性别：<span class="token punctuation">{</span>sex<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>年龄：<span class="token punctuation">{</span>age<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
				<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		Person<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">name</span><span class="token operator">:</span>PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span> <span class="token comment">//限制name必传，且为字符串</span>
			<span class="token literal-property property">sex</span><span class="token operator">:</span>PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span><span class="token comment">//限制sex为字符串</span>
			<span class="token literal-property property">age</span><span class="token operator">:</span>PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">,</span><span class="token comment">//限制age为数值</span>
		<span class="token punctuation">}</span>

		<span class="token comment">//指定默认标签属性值</span>
		Person<span class="token punctuation">.</span>defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">sex</span><span class="token operator">:</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token comment">//sex默认值为男</span>
			<span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span> <span class="token comment">//age默认值为18</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//渲染组件到页面</span>
		ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Person name<span class="token operator">=</span><span class="token string">&quot;jerry&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'test1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="refs"><a href="#refs" class="header-anchor">#</a> refs</h4> <p>**字符串形式的ref：**会将打上 ref 标识的标签都收集到组件实例的 refs 属性中，k:v的形式，k为定义的字符串标识，v为当前 ref 所在的标签节点 <strong>已废弃(存在效率问题)</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//创建组件</span>
            <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
                <span class="token comment">//展示左侧输入框的数据</span>
                <span class="token function-variable function">showData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token keyword">const</span> <span class="token punctuation">{</span> input1 <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>refs<span class="token punctuation">;</span>
                    <span class="token function">alert</span><span class="token punctuation">(</span>input1<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">;</span>
                <span class="token comment">//展示右侧输入框的数据</span>
                <span class="token function-variable function">showData2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token keyword">const</span> <span class="token punctuation">{</span> input2 <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>refs<span class="token punctuation">;</span>
                    <span class="token function">alert</span><span class="token punctuation">(</span>input2<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">;</span>
                <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> <span class="token punctuation">(</span>
                        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span>input
                                ref<span class="token operator">=</span><span class="token string">&quot;input1&quot;</span>
                                type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span>
                                placeholder<span class="token operator">=</span><span class="token string">&quot;点击按钮提示数据&quot;</span>
                            <span class="token operator">/</span><span class="token operator">&gt;</span>
                            <span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
                            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>showData<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                                点我提示左侧的数据
                            <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
                            <span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
                            <span class="token operator">&lt;</span>input
                                ref<span class="token operator">=</span><span class="token string">&quot;input2&quot;</span>
                                onBlur<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>showData2<span class="token punctuation">}</span>
                                type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span>
                                placeholder<span class="token operator">=</span><span class="token string">&quot;失去焦点提示数据&quot;</span>
                            <span class="token operator">/</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                    <span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//渲染组件到页面</span>
            ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
                <span class="token operator">&lt;</span>Demo a<span class="token operator">=</span><span class="token string">&quot;1&quot;</span> b<span class="token operator">=</span><span class="token string">&quot;2&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
                document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>**回调函数形式的ref：**会将打上 ref 标识的节点作为组件实例的属性，可通过 this.xxx 直接访问DOM</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//创建组件</span>
            <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
                <span class="token comment">//展示左侧输入框的数据</span>
                <span class="token function-variable function">showData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token keyword">const</span> <span class="token punctuation">{</span> input1 <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
                    <span class="token function">alert</span><span class="token punctuation">(</span>input1<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">;</span>
                <span class="token comment">//展示右侧输入框的数据</span>
                <span class="token function-variable function">showData2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token keyword">const</span> <span class="token punctuation">{</span> input2 <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
                    <span class="token function">alert</span><span class="token punctuation">(</span>input2<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">;</span>
                <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> <span class="token punctuation">(</span>
                        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span>input
                                ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>input1 <span class="token operator">=</span> c<span class="token punctuation">)</span><span class="token punctuation">}</span>
                                type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span>
                                placeholder<span class="token operator">=</span><span class="token string">&quot;点击按钮提示数据&quot;</span>
                            <span class="token operator">/</span><span class="token operator">&gt;</span>
                            <span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
                            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>showData<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                                点我提示左侧的数据
                            <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
                            <span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
                            <span class="token operator">&lt;</span>input
                                onBlur<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>showData2<span class="token punctuation">}</span>
                                ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>input2 <span class="token operator">=</span> c<span class="token punctuation">)</span><span class="token punctuation">}</span>
                                type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span>
                                placeholder<span class="token operator">=</span><span class="token string">&quot;失去焦点提示数据&quot;</span>
                            <span class="token operator">/</span><span class="token operator">&gt;</span>
                            <span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                    <span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//渲染组件到页面</span>
            ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
                <span class="token operator">&lt;</span>Demo a<span class="token operator">=</span><span class="token string">&quot;1&quot;</span> b<span class="token operator">=</span><span class="token string">&quot;2&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
                document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>**回调执行次数：**如果 ref 回调函数是以内联函数的方式定义的，在更新（不包括第一次渲染）过程中它会被执行两次，第一次传入参数 null，第二次会传入参数 DOM 元素。这是因为在每次渲染时会创建一个新的函数实例，所有 React 清空旧的 ref 并设置新的。通过将 ref 的回调函数定义成 class 的绑定函数的方式可避免上述问题。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//创建组件</span>
		<span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>

			state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">isHot</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span>

			<span class="token function-variable function">showInfo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
				<span class="token keyword">const</span> <span class="token punctuation">{</span>input1<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>
				<span class="token function">alert</span><span class="token punctuation">(</span>input1<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>

			<span class="token function-variable function">changeWeather</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
				<span class="token comment">//获取原来的状态</span>
				<span class="token keyword">const</span> <span class="token punctuation">{</span>isHot<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
				<span class="token comment">//更新状态</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">isHot</span><span class="token operator">:</span><span class="token operator">!</span>isHot<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>

			<span class="token function-variable function">saveInput</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>input1 <span class="token operator">=</span> c<span class="token punctuation">;</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'@'</span><span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">const</span> <span class="token punctuation">{</span>isHot<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
				<span class="token keyword">return</span><span class="token punctuation">(</span>
					<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>今天天气很<span class="token punctuation">{</span>isHot <span class="token operator">?</span> <span class="token string">'炎热'</span><span class="token operator">:</span><span class="token string">'凉爽'</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
						<span class="token punctuation">{</span><span class="token comment">/*&lt;input ref={(c)=&gt;{this.input1 = c;console.log('@',c);}} type=&quot;text&quot;/&gt;&lt;br/&gt;&lt;br/&gt;*/</span><span class="token punctuation">}</span>
						<span class="token operator">&lt;</span>input ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>saveInput<span class="token punctuation">}</span> type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>showInfo<span class="token punctuation">}</span><span class="token operator">&gt;</span>点我提示输入的数据<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>changeWeather<span class="token punctuation">}</span><span class="token operator">&gt;</span>点我切换天气<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
				<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//渲染组件到页面</span>
		ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Demo<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>**createRef 的形式：**React.createRef() 调用后可以返回一个容器，该容器可以存储被 ref 标识的节点，该容器专人专用，只能存储一个</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//创建组件</span>
		<span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
			<span class="token comment">/* 
				React.createRef调用后可以返回一个容器，该容器可以存储被ref所标识的节点,该容器是“专人专用”的
			 */</span>
			myRef <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			myRef2 <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token comment">//展示左侧输入框的数据</span>
			<span class="token function-variable function">showData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
				<span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>myRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token comment">//展示右侧输入框的数据</span>
			<span class="token function-variable function">showData2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
				<span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>myRef2<span class="token punctuation">.</span>current<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">return</span><span class="token punctuation">(</span>
					<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span>input ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>myRef<span class="token punctuation">}</span> type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;点击按钮提示数据&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
						<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>showData<span class="token punctuation">}</span><span class="token operator">&gt;</span>点我提示左侧的数据<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
						<span class="token operator">&lt;</span>input onBlur<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>showData2<span class="token punctuation">}</span> ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>myRef2<span class="token punctuation">}</span> type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> placeholder<span class="token operator">=</span><span class="token string">&quot;失去焦点提示数据&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
					<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
				<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//渲染组件到页面</span>
		ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Demo a<span class="token operator">=</span><span class="token string">&quot;1&quot;</span> b<span class="token operator">=</span><span class="token string">&quot;2&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="react-中收集表单数据"><a href="#react-中收集表单数据" class="header-anchor">#</a> react 中收集表单数据</h3> <h4 id="非受控组件"><a href="#非受控组件" class="header-anchor">#</a> 非受控组件</h4> <p>组件中输入类的DOM数据现用现取，不保存在组件实例的 state 中</p> <h4 id="受控组件"><a href="#受控组件" class="header-anchor">#</a> 受控组件</h4> <p>组件中输入类的DOM数据保存在组件实例的 state 中（类似于Vue中的双向绑定）</p> <h3 id="高阶函数"><a href="#高阶函数" class="header-anchor">#</a> 高阶函数</h3> <p>如果一个函数符合下面两个规范中的任意一个，那么就是高阶函数：</p> <ul><li>若A函数，接收的参数是一个函数，那么A函数就是高阶函数</li> <li>若A函数，调用后的返回值依然是一个函数，那么A函数就是高阶函数</li></ul> <p>**常见的高阶函数：**Promise、setTimeout、arr.map()等等</p> <p>**函数的柯里化：**通过函数调用继续返回函数的方式，实现多次接收参数最后统一处理的函数编码形式</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>			<span class="token comment">//保存表单数据到状态中</span>
			<span class="token function-variable function">saveFormData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">dataType</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">[</span>dataType<span class="token punctuation">]</span><span class="token operator">:</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token punctuation">)</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
</code></pre></div><h3 id="生命周期函数-旧"><a href="#生命周期函数-旧" class="header-anchor">#</a> 生命周期函数（旧）</h3> <p><strong>由组件实例调用</strong></p> <ul><li>组件从创建到死亡会经历一些特定的阶段</li> <li>React 组件中包含一系列钩子函数（生命周期回调函数），会在特定的时刻调用</li> <li>在定义组件时，会在特定的生命周期回调函数中做特定的工作</li></ul> <p>![2_react生命周期(旧)](D:\Program Files (x86)\Code\React\基础全家桶\源码\react_basic\12_组件的生命周期\2_react生命周期(旧).png)</p> <p>1、初始化阶段：由ReactDOM.render()触发---初次渲染</p> <ul><li>constructor()</li> <li>componentWillMount()</li> <li>render()</li> <li>componentDidMount()<strong>一般在这个钩子中做一些初始化的事情，例如：开启定时器、发送网络请求、订阅消息</strong></li></ul> <p>2、更新阶段：由组件内部的 this.setState() 或父组件 render 触发</p> <ul><li>shouldComponentUpdate()</li> <li>componentWillUpdate()</li> <li>render()</li> <li>ComponentDidUpdate()</li></ul> <p>3、卸载组件：由ReactDOM.unmountComponentAtNode()触发</p> <ul><li>componentWillUnmount()<strong>一般 在这个钩子中做一些收尾的事情。例如：关闭定时器、取消订阅消息</strong></li></ul> <p><strong>注：子组件第一次接收到props不会触发componentWillReceiveProps()，下一次收到的props才会触发</strong></p> <h3 id="生命周期函数-新"><a href="#生命周期函数-新" class="header-anchor">#</a> 生命周期函数（新）</h3> <p>![3_react生命周期(新)](D:\Program Files (x86)\Code\React\基础全家桶\源码\react_basic\12_组件的生命周期\3_react生命周期(新).png)</p> <p>1、初始化阶段：由ReactDOM.render()触发---初次渲染</p> <ul><li>constructor()</li> <li>getDerivedStateFromProps()</li> <li>render()</li> <li>componentDidMount()<strong>一般在这个钩子中做一些初始化的事情，例如：开启定时器、发送网络请求、订阅消息</strong></li></ul> <p>2、更新阶段：由组件内部的 this.setState() 或父组件 render 触发</p> <ul><li>getDerivedStateFromProps()</li> <li>shouldComponentUpdate()</li> <li>render()</li> <li>getSnapshotBeforeUpdate()</li> <li>ComponentDidUpdate()</li></ul> <p>3、卸载组件：由ReactDOM.unmountComponentAtNode()触发</p> <ul><li>componentWillUnmount()<strong>一般 在这个钩子中做一些收尾的事情。例如：关闭定时器、取消订阅消息</strong></li></ul> <p>**相比旧生命周期：**即将废弃三个钩子：componentWillMount、componentWillReceiveProps、componentWillUpdate。新增了两个钩子：getDerivedStateFromProps(从props得到派生的状态)、getSnapshotBeforeUpdate</p> <p>若state的值在任何时候都取决于props，那么可以使用getDerivedStateFromProps</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
			<span class="token keyword">static</span> <span class="token function">getDerivedStateFromProps</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span>state</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'getDerivedStateFromProps'</span><span class="token punctuation">,</span>props<span class="token punctuation">,</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> <span class="token keyword">null</span>
			<span class="token punctuation">}</span>
</code></pre></div><p>getSnapshotBeforeUpdate()在最近一次渲染输出（提交到DOM节点）之前调用，返回值将作为参数传递给componentDidUpdate()，componentDidUpdate()接收三个参数，分别是preProps、preState、snapshot</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>			<span class="token function">getSnapshotBeforeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>refs<span class="token punctuation">.</span>list<span class="token punctuation">.</span>scrollHeight
			<span class="token punctuation">}</span>

			<span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token parameter">preProps<span class="token punctuation">,</span>preState<span class="token punctuation">,</span>height</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>refs<span class="token punctuation">.</span>list<span class="token punctuation">.</span>scrollTop <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>refs<span class="token punctuation">.</span>list<span class="token punctuation">.</span>scrollHeight <span class="token operator">-</span> height
			<span class="token punctuation">}</span>
</code></pre></div><h3 id="diffing-算法"><a href="#diffing-算法" class="header-anchor">#</a> diffing 算法</h3> <p>经典面试题:</p> <p>1). react/vue中的key有什么作用？（key的内部原理是什么？）</p> <p>2). 为什么遍历列表时，key最好不要用index?</p> <ol><li>虚拟DOM中key的作用：</li></ol> <p>1). 简单的说: key是虚拟DOM对象的标识, 在更新显示时key起着极其重要的作用。</p> <p>2). 详细的说: 当状态中的数据发生变化时，react会根据【新数据】生成【新的虚拟DOM】,随后React进行【新虚拟DOM】与【旧虚拟DOM】的diff比较，比较规则如下：</p> <div class="language- extra-class"><pre><code>				a. 旧虚拟DOM中找到了与新虚拟DOM相同的key：
</code></pre></div><p>(1).若虚拟DOM中内容没变, 直接使用之前的真实DOM</p> <p>(2).若虚拟DOM中内容变了, 则生成新的真实DOM，随后替换掉页面中之前的真实DOM</p> <div class="language- extra-class"><pre><code>				b. 旧虚拟DOM中未找到与新虚拟DOM相同的key
</code></pre></div><p>根据数据创建新的真实DOM，随后渲染到到页面</p> <ol start="2"><li>用index作为key可能会引发的问题：</li></ol> <p>1. 若对数据进行：**逆序添加、逆序删除（比如在前面添加）**等破坏顺序操作:</p> <p>会产生没有必要的真实DOM更新 ==&gt; 界面效果没问题, 但效率低。</p> <p>2. 如果结构中还包含输入类的DOM：</p> <p>会产生错误DOM更新 ==&gt; 界面有问题。</p> <p>3. 注意！如果不存在对数据的逆序添加、逆序删除等破坏顺序操作，</p> <p>仅用于渲染列表用于展示，使用index作为key是没有问题的。</p> <ol start="3"><li>开发中如何选择key?:</li></ol> <p>1.最好使用每条数据的唯一标识作为key, 比如id、手机号、身份证号、学号等唯一值。</p> <p>2.如果确定只是简单的展示数据，用index也是可以的。</p> <h2 id="react-脚手架"><a href="#react-脚手架" class="header-anchor">#</a> react 脚手架</h2> <h3 id="创建项目并启动"><a href="#创建项目并启动" class="header-anchor">#</a> 创建项目并启动</h3> <ul><li>全局安装：npm install -g create-react-app</li> <li>切换到想创建项目的目录：create-react-app hello-react</li> <li>进入项目文件夹：cd hello-react</li> <li>启动项目：npm start</li></ul> <h3 id="父子组件通信的一种方法"><a href="#父子组件通信的一种方法" class="header-anchor">#</a> 父子组件通信的一种方法</h3> <p>1.【父组件】给【子组件】传递数据：通过props传递</p> <p>2.【子组件】给【父组件】传递数据：通过props传递，要求父提前给子传递一个函数</p> <p>App组件中：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 添加一个 todo</span>
    <span class="token function-variable function">addTodo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">todoObj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> todos <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
        <span class="token keyword">const</span> newTodos <span class="token operator">=</span> <span class="token punctuation">[</span>todoObj<span class="token punctuation">,</span> <span class="token operator">...</span>todos<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">todos</span><span class="token operator">:</span> newTodos<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token operator">&lt;</span>Header addTodo<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>addTodo<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p>Header组件中：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function-variable function">handleKeyUp</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> keyCode<span class="token punctuation">,</span> target <span class="token punctuation">}</span> <span class="token operator">=</span> event<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>keyCode <span class="token operator">!==</span> <span class="token number">13</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;输入不能为空&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">const</span> todoObj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token function">nanoid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> target<span class="token punctuation">.</span>value<span class="token punctuation">,</span> <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">addTodo</span><span class="token punctuation">(</span>todoObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        target<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;todo-header&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;请输入任务&quot;</span> onKeyUp<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleKeyUp<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="脚手架配置代理"><a href="#脚手架配置代理" class="header-anchor">#</a> 脚手架配置代理</h3> <p>解决跨域：请求可以发送，但是数据回不来</p> <p>客户端在3000， 服务器在5000</p> <p>代理服务器也是开在3000端口的</p> <p><strong>方法一：</strong></p> <p>在 package.json 中添加</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;proxy&quot;</span><span class="token operator">:</span><span class="token string">&quot;http://localhost:5000&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>发送请求时：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'http://localhost:3000/students'</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>并不是所有请求都会被转发给5000端口，倘若在本地3000端口public中有所请求的资源，会返回该资源并且也不会向服务器发起请求</strong></p> <p><strong>方法二：</strong></p> <p>新建 setupProxy.js 文件</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// commonjs 语法</span>
<span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http-proxy-middleware'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
		<span class="token function">proxy</span><span class="token punctuation">(</span><span class="token string">'/api1'</span><span class="token punctuation">,</span><span class="token punctuation">{</span> <span class="token comment">//遇见/api1前缀的请求，就会触发该代理配置</span>
			<span class="token literal-property property">target</span><span class="token operator">:</span><span class="token string">'http://localhost:5000'</span><span class="token punctuation">,</span> <span class="token comment">//请求转发给谁</span>
			<span class="token literal-property property">changeOrigin</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//控制服务器收到的请求头中Host的值</span>
			<span class="token literal-property property">pathRewrite</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string-property property">'^/api1'</span><span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">}</span> <span class="token comment">//重写请求路径(必须)</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token function">proxy</span><span class="token punctuation">(</span><span class="token string">'/api2'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
			<span class="token literal-property property">target</span><span class="token operator">:</span><span class="token string">'http://localhost:5001'</span><span class="token punctuation">,</span>
			<span class="token literal-property property">changeOrigin</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token literal-property property">pathRewrite</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string-property property">'^/api2'</span><span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>changeOrigin设置为true时，<strong>服务器收到的请求头</strong>中的host为：localhost:5000</li> <li>changeOrigin设置为false时，服务器收到的请求头中的host为：localhost:3000</li> <li>changeOrigin默认值为false，但我们一般将changeOrigin值设为 true</li></ul> <h3 id="连续解构赋值"><a href="#连续解构赋值" class="header-anchor">#</a> 连续解构赋值</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>		<span class="token comment">// 连续解构赋值 + 重命名</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">keywordElement</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> keyword <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
</code></pre></div><p>将 value 的值重命名为 keyword</p> <h3 id="组件间通信-pubsubjs"><a href="#组件间通信-pubsubjs" class="header-anchor">#</a> 组件间通信 PubSubJS</h3> <p>消息订阅与发布（可使用任意组件间通信）</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>npm install pubsub<span class="token operator">-</span>js
</code></pre></div><p>发布消息：发布一个名为 'atguigu' 的消息，并带上数据</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>PubSub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'atguigu'</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">isLoading</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token literal-property property">users</span><span class="token operator">:</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>items<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>订阅消息：订阅这个 &quot;atguigu&quot; 的消息</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>token <span class="token operator">=</span> PubSUb<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">'atguigu'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span>stateObj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>stateObj<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 第一个参数是消息名(占位)，第二个参数才是传过来的数据</span>
</code></pre></div><p>取消订阅：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>PubSUb<span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>token<span class="token punctuation">)</span>
</code></pre></div><h3 id="fetch-发送请求"><a href="#fetch-发送请求" class="header-anchor">#</a> fetch 发送请求</h3> <p>不基于 xhr，不是第三方库，不需要下载</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
			<span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/api1/search/users2?q=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>keyWord<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
			<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
			PubSub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'atguigu'</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">isLoading</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token literal-property property">users</span><span class="token operator">:</span>data<span class="token punctuation">.</span>items<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'请求出错'</span><span class="token punctuation">,</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
			PubSub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'atguigu'</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">isLoading</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token literal-property property">err</span><span class="token operator">:</span>error<span class="token punctuation">.</span>message<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>请求返回的是一个Promise实例对象，第一次<span class="token keyword">await</span><span class="token punctuation">(</span><span class="token function">相当于调用then</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>后会拿到这个实例对象的值response，然后response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>返回的还是一个Promise实例对象，第二次<span class="token keyword">await</span>后会拿到这个实例对象的值data，就是最终需要的数据
</code></pre></div><h2 id="react-路由"><a href="#react-路由" class="header-anchor">#</a> react 路由</h2> <p>单页面应用 <strong>SPA</strong></p> <h3 id="路由的基本使用"><a href="#路由的基本使用" class="header-anchor">#</a> 路由的基本使用</h3> <p>1、明确好界面中的导航区、展示区</p> <p>2、导航区的 a 标签改为 Link 标签</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;Link to=&quot;/xxxx&quot;&gt;Demo&lt;/Link&gt;
</code></pre></div><p>3、展示区写 Route 标签进行路径的匹配</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;Route path=&quot;/xxxx&quot; component={Demo}&gt;&lt;/Route&gt;
</code></pre></div><p>4、的最外侧包裹了一个  或</p> <h3 id="路由组件与一般组件的区别"><a href="#路由组件与一般组件的区别" class="header-anchor">#</a> 路由组件与一般组件的区别</h3> <p>1、一般组件自己写标签 路由组件放在 Route 标签中</p> <p>2、一般组件当不传参数时，props是空对象；<strong>路由组件当不传参数时，props会收到三个对象，分别是：history location match</strong></p> <h3 id="navlink"><a href="#navlink" class="header-anchor">#</a> NavLink</h3> <p>点击哪个，就给哪个标签加一个名为 atguigu 的类名 默认加的类名为 active</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;NavLink activeClassName=&quot;atguigu&quot; className=&quot;list-group-item&quot; to=&quot;/about&quot;&gt;About&lt;/NavLink&gt;
</code></pre></div><p>封装一下：</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;MyNavLink to=&quot;/about&quot;&gt;About&lt;/MyNavLink&gt;
</code></pre></div><p>标签体内容也是一种标签属性</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;NavLink activeClassName=&quot;atguigu&quot; className=&quot;list-group-item&quot; {...this.props}/&gt;
</code></pre></div><p>this.props: { to:'/about',  children:'About' }</p> <h3 id="switch-组件"><a href="#switch-组件" class="header-anchor">#</a> Switch 组件</h3> <div class="language- extra-class"><pre class="language-text"><code>&lt;Switch&gt;
	&lt;Route path=&quot;/about&quot; component={About}/&gt;
	&lt;Route path=&quot;/home&quot; component={Home}/&gt;
	&lt;Route path=&quot;/home&quot; component={Test}/&gt;
&lt;/Switch&gt;
</code></pre></div><p>**单一匹配：**只会展示第一个匹配的组件，也就是说只会展示 Home组件而不会展示 Test组件</p> <h3 id="模糊匹配与精准匹配"><a href="#模糊匹配与精准匹配" class="header-anchor">#</a> 模糊匹配与精准匹配</h3> <p>**模糊匹配：**默认是模糊匹配</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;Link to=&quot;home/a/b&quot;&gt;Demo&lt;/Link&gt;
&lt;Route path=&quot;/home&quot; component={Demo}&gt;&lt;/Route&gt;
</code></pre></div><p><strong>精准匹配：</strong></p> <div class="language- extra-class"><pre class="language-text"><code>&lt;Link to=&quot;home/a/b&quot;&gt;Demo&lt;/Link&gt;
&lt;Route exact={true} path=&quot;/home&quot; component={Demo}&gt;&lt;/Route&gt;
</code></pre></div><h3 id="redirect-重定向"><a href="#redirect-重定向" class="header-anchor">#</a> Redirect 重定向</h3> <div class="language- extra-class"><pre class="language-text"><code>&lt;Switch&gt;
	&lt;Route path=&quot;/about&quot; component={About}/&gt;
	&lt;Route path=&quot;/home&quot; component={Home}/&gt;
	&lt;Redirect to=&quot;/about&quot;/&gt;
&lt;/Switch&gt;
</code></pre></div><p>若是路径 / ，则不匹配任意一个路由组件，就去 /about 路径展示About组件</p> <h3 id="嵌套路由"><a href="#嵌套路由" class="header-anchor">#</a> 嵌套路由</h3> <div class="language- extra-class"><pre class="language-text"><code>&lt;Switch&gt;
	&lt;Route path=&quot;/home/news&quot; component={News}/&gt;
	&lt;Route path=&quot;/home/message&quot; component={Message}/&gt;
	&lt;Redirect to=&quot;/home/news&quot;/&gt;
&lt;/Switch&gt;
</code></pre></div><p>1、注册子路由时要写上父路由的 path 值</p> <p>2、路由的匹配是按照注册路由的顺序进行的</p> <h3 id="向路由组件传递-params-参数"><a href="#向路由组件传递-params-参数" class="header-anchor">#</a> 向路由组件传递 params 参数</h3> <div class="language- extra-class"><pre class="language-text"><code>// 传递参数
&lt;Link to={`/home/message/detail/${msgObj.id}/${msgObj.title}`}&gt;{msgObj.title}&lt;/Link&gt;
// 声明接收参数 需要在路径后占位
&lt;Route path=&quot;/home/message/detail/:id/:title&quot; component={Detail}/&gt;
</code></pre></div><p>在 Detail 组件中，通过</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>match<span class="token punctuation">.</span>params 拿到params参数
</code></pre></div><h3 id="向路由组件传递-search-query-参数"><a href="#向路由组件传递-search-query-参数" class="header-anchor">#</a> 向路由组件传递 search （query）参数</h3> <div class="language- extra-class"><pre class="language-text"><code>// 传递参数
&lt;Link to={`/home/message/detail/?id=${msgObj.id}&amp;title=${msgObj.title}`}&gt;{msgObj.title}&lt;/Link&gt;
// search 参数不需要声明接收
&lt;Route path=&quot;/home/message/detail&quot; component={Detail}/&gt;
</code></pre></div><p>在 Detail 组件中，通过</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>location<span class="token punctuation">.</span>search 拿到search参数 <span class="token string">&quot;?id=01&amp;title=消息1&quot;</span>
</code></pre></div><p><strong>注：urlencoded编码方式 &quot;key=value&amp;key=value&quot;</strong></p> <h3 id="向路由组件传递-state-参数"><a href="#向路由组件传递-state-参数" class="header-anchor">#</a> 向路由组件传递 state 参数</h3> <p><strong>参数不会显示在地址上</strong></p> <div class="language- extra-class"><pre class="language-text"><code>// 传递参数
&lt;Link to={{path=&quot;/home/message/detail&quot;, state={id:msgObj.id, title:msgObj.title}}}&gt;&lt;/Link&gt;
// state 参数不需要声明接收
&lt;Route path=&quot;/home/message/detail&quot; component={Detail}/&gt;
</code></pre></div><p>在 Detail 组件中，通过</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>location<span class="token punctuation">.</span>state 拿到state参数
</code></pre></div><h3 id="编程式路由导航"><a href="#编程式路由导航" class="header-anchor">#</a> 编程式路由导航</h3> <p>在路由组件中</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token function-variable function">replaceShow</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> title</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">//replace跳转+携带params参数</span>
        <span class="token comment">//this.props.history.replace(`/home/message/detail/${id}/${title}`)</span>

        <span class="token comment">//replace跳转+携带search参数</span>
        <span class="token comment">// this.props.history.replace(`/home/message/detail?id=${id}&amp;title=${title}`)</span>

        <span class="token comment">//replace跳转+携带state参数</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/home/message/detail</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span> id<span class="token punctuation">,</span> title <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function-variable function">pushShow</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> title</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">//push跳转+携带params参数</span>
        <span class="token comment">// this.props.history.push(`/home/message/detail/${id}/${title}`)</span>

        <span class="token comment">//push跳转+携带search参数</span>
        <span class="token comment">// this.props.history.push(`/home/message/detail?id=${id}&amp;title=${title}`)</span>

        <span class="token comment">//push跳转+携带state参数</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/home/message/detail</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span> id<span class="token punctuation">,</span> title <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function-variable function">back</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">goBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function-variable function">forward</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">goForward</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function-variable function">go</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="withrouter-的使用"><a href="#withrouter-的使用" class="header-anchor">#</a> withRouter 的使用</h3> <ul><li>withRouter （是一个函数）可以加工一般组件，让一般组件具备路由组件所特有的API</li> <li>withRouter 的返回值是一个新组件</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">withRouter</span><span class="token punctuation">(</span>Header<span class="token punctuation">)</span>
</code></pre></div><h2 id="redux-状态管理"><a href="#redux-状态管理" class="header-anchor">#</a> redux 状态管理</h2> <div class="language- extra-class"><pre><code>	组件中需要用到 redux 中的状态数据（初始化时），当组件想要改变 redux 中数据的时候，将会调用 dispatch() 方法，将一个 action 对象（包括 type 属性和 data 属性）交给 store（调度者），store 将之前的状态（previousState）和这个 action 对象交给 reducers，reducers 对状态进行改变，最后返回一个新状态交给 store，因为状态改变了， 所以用到这个数据的所有组件将会重新渲染，组件最终能从 redux 中得到（getState()）最新的状态数据。
</code></pre></div><p>1.求和案例_redux精简版</p> <p>(1).去除Count组件自身的状态</p> <p>(2).src下建立:</p> <p>-redux</p> <p>-store.js</p> <p>-count_reducer.js</p> <p>(3).store.js：</p> <p>1).引入redux中的createStore函数，创建一个store对象，</p> <p>2).createStore调用时要传入一个为其服务的reducer函数</p> <p>3).记得暴露store对象</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//引入createStore，专门用于创建redux中最为核心的store对象</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>createStore<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span>
<span class="token comment">//引入为Count组件服务的reducer</span>
<span class="token keyword">import</span> countReducer <span class="token keyword">from</span> <span class="token string">'./count_reducer'</span>
<span class="token comment">//暴露store</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">createStore</span><span class="token punctuation">(</span>countReducer<span class="token punctuation">)</span>
</code></pre></div><p>(4).count_reducer.js：</p> <p>1).reducer的本质是一个函数，接收：preState,action，返回加工后的状态</p> <p>2).reducer有两个作用：初始化状态，加工状态</p> <p>3).reducer被第一次调用时，是store自动触发的</p> <p>传递的preState是undefined,</p> <p>传递的action是：{ type:'@@REDUX/INIT_a.2.b.4 }</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">INCREMENT</span><span class="token punctuation">,</span> <span class="token constant">DECREMENT</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./constant'</span>

<span class="token keyword">const</span> initState <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">//初始化状态</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">countReducer</span><span class="token punctuation">(</span><span class="token parameter">preState <span class="token operator">=</span> initState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// console.log(preState);</span>
	<span class="token comment">//从action对象中获取：type、data</span>
	<span class="token keyword">const</span> <span class="token punctuation">{</span> type<span class="token punctuation">,</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> action
	<span class="token comment">//根据type决定如何加工数据</span>
	<span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">case</span> <span class="token constant">INCREMENT</span><span class="token operator">:</span> <span class="token comment">//如果是加</span>
			<span class="token keyword">return</span> preState <span class="token operator">+</span> data
		<span class="token keyword">case</span> <span class="token constant">DECREMENT</span><span class="token operator">:</span> <span class="token comment">//如果是减</span>
			<span class="token keyword">return</span> preState <span class="token operator">-</span> data
		<span class="token keyword">default</span><span class="token operator">:</span>
			<span class="token keyword">return</span> preState
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>(5).在index.js中监测store中状态的改变，一旦发生改变重新渲染</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>备注：redux只负责管理状态，至于状态的改变驱动着页面的展示，要自己写。</strong></p> <p>2.求和案例_redux完整版</p> <p>新增文件：</p> <p>1.count_action.js 专门用于创建action对象</p> <p>2.constant.js 放置容易写错的type值</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/* 
	该文件专门为Count组件生成action对象
*/</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span><span class="token constant">INCREMENT</span><span class="token punctuation">,</span><span class="token constant">DECREMENT</span><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./constant'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">createIncrementAction</span> <span class="token operator">=</span> <span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token constant">INCREMENT</span><span class="token punctuation">,</span>data<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">createDecrementAction</span> <span class="token operator">=</span> <span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token constant">DECREMENT</span><span class="token punctuation">,</span>data<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>在组件中使用时：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createIncrementAction</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> 将action对象交给store
</code></pre></div><h3 id="异步-action"><a href="#异步-action" class="header-anchor">#</a> 异步 action</h3> <ul><li>如果 action 是一个一般对象 Object，那么就是同步 action</li> <li>如果 action 是一个函数，那么就是异步 action</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>store<span class="token punctuation">.</span>js 中

<span class="token comment">//引入createStore，专门用于创建redux中最为核心的store对象</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>createStore<span class="token punctuation">,</span>applyMiddleware<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span>
<span class="token comment">//引入为Count组件服务的reducer</span>
<span class="token keyword">import</span> countReducer <span class="token keyword">from</span> <span class="token string">'./count_reducer'</span>
<span class="token comment">//引入redux-thunk，用于支持异步action</span>
<span class="token keyword">import</span> thunk <span class="token keyword">from</span> <span class="token string">'redux-thunk'</span>
<span class="token comment">//暴露store</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">createStore</span><span class="token punctuation">(</span>countReducer<span class="token punctuation">,</span><span class="token function">applyMiddleware</span><span class="token punctuation">(</span>thunk<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code>action<span class="token punctuation">.</span>js

<span class="token comment">//异步action，就是指action的值为函数,异步action中一般都会调用同步action，异步action不是必须要用的。</span>
<span class="token comment">// 返回的这个函数是 store 调用</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">createIncrementAsyncAction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span>time</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
		<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
			<span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createIncrementAction</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>time<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="容器组件、ui组件"><a href="#容器组件、ui组件" class="header-anchor">#</a> 容器组件、UI组件</h3> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token comment">// 容器组件</span>

<span class="token comment">//引入Count的UI组件</span>
<span class="token keyword">import</span> CountUI <span class="token keyword">from</span> <span class="token string">&quot;../../components/Count&quot;</span><span class="token punctuation">;</span>
<span class="token comment">//引入action</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    createIncrementAction<span class="token punctuation">,</span>
    createDecrementAction<span class="token punctuation">,</span>
    createIncrementAsyncAction<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../../redux/count_action&quot;</span><span class="token punctuation">;</span>

<span class="token comment">//引入connect用于连接UI组件与redux</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-redux&quot;</span><span class="token punctuation">;</span>

<span class="token comment">/* 
	1.mapStateToProps函数返回的是一个对象；
	2.返回的对象中的key就作为传递给UI组件props的key,value就作为传递给UI组件props的value
	3.mapStateToProps用于传递状态
*/</span>
<span class="token comment">// 状态映射成 props</span>
<span class="token keyword">function</span> <span class="token function">mapStateToProps</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> state <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 
	1.mapDispatchToProps函数返回的是一个对象；
	2.返回的对象中的key就作为传递给UI组件props的key,value就作为传递给UI组件props的value
	3.mapDispatchToProps用于传递操作状态的方法
*/</span>
<span class="token comment">// 方法映射成 props</span>
<span class="token keyword">function</span> <span class="token function">mapDispatchToProps</span><span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">jia</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createIncrementAction</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function-variable function">jian</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createDecrementAction</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function-variable function">jiaAsync</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">number<span class="token punctuation">,</span> time</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
            <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createIncrementAsyncAction</span><span class="token punctuation">(</span>number<span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//使用connect()()创建并暴露一个Count的容器组件</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>mapStateToProps<span class="token punctuation">,</span> mapDispatchToProps<span class="token punctuation">)</span><span class="token punctuation">(</span>CountUI<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token comment">// UI组件</span>

<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Count</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>

	state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">carName</span><span class="token operator">:</span><span class="token string">'奔驰c63'</span><span class="token punctuation">}</span>

	<span class="token comment">//加法</span>
	<span class="token function-variable function">increment</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
		<span class="token keyword">const</span> <span class="token punctuation">{</span>value<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectNumber
		<span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">jia</span><span class="token punctuation">(</span>value<span class="token operator">*</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//减法</span>
	<span class="token function-variable function">decrement</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
		<span class="token keyword">const</span> <span class="token punctuation">{</span>value<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectNumber
		<span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">jian</span><span class="token punctuation">(</span>value<span class="token operator">*</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//奇数再加</span>
	<span class="token function-variable function">incrementIfOdd</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
		<span class="token keyword">const</span> <span class="token punctuation">{</span>value<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectNumber
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>count <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">jia</span><span class="token punctuation">(</span>value<span class="token operator">*</span><span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//异步加</span>
	<span class="token function-variable function">incrementAsync</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
		<span class="token keyword">const</span> <span class="token punctuation">{</span>value<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectNumber
		<span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">jiaAsync</span><span class="token punctuation">(</span>value<span class="token operator">*</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//console.log('UI组件接收到的props是',this.props);</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
				</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">当前求和为：</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
				</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">c</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectNumber <span class="token operator">=</span> c<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
					</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">1</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
					</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">2</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
					</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">3</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
				</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">&amp;nbsp;
				</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>increment<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">+</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">&amp;nbsp;
				</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>decrement<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">-</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">&amp;nbsp;
				</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>incrementIfOdd<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">当前求和为奇数再加</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">&amp;nbsp;
				</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>incrementAsync<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">异步加</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">&amp;nbsp;
			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
		<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="求和案例-react-redux优化"><a href="#求和案例-react-redux优化" class="header-anchor">#</a> 求和案例_react-redux优化</h3> <div class="language- extra-class"><pre class="language-text"><code>		(1).容器组件和UI组件整合一个文件
		(2).无需自己给容器组件传递store，给&lt;App/&gt;包裹一个&lt;Provider store={store}&gt;即可。
		(3).使用了react-redux后也不用再自己检测redux中状态的改变了，容器组件可以自动完成这个工作。
		(4).mapDispatchToProps也可以简单的写成一个对象
		(5).一个组件要和redux“打交道”要经过哪几步？
						(1).定义好UI组件---不暴露
						(2).引入connect生成一个容器组件，并暴露，写法如下：
								connect(
                  // 这里的 state 就是 redux （store）保存的状态
									state =&gt; ({key:value}), //映射状态
									{key:xxxxxAction} //映射操作状态的方法
								)(UI组件)
						(4).在UI组件中通过this.props.xxxxxxx读取和操作状态
</code></pre></div></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/learn-repo/webpack/webpack_base.html" class="prev">
          Webpack基础
        </a></span> <span class="next"><a href="/learn-repo/" class="router-link-active">
          欢迎学习
        </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:0;" data-v-ac050c62></ul></main></div> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/learn-repo/assets/js/app.1c28de55.js" defer></script><script src="/learn-repo/assets/js/3.14e5b99f.js" defer></script><script src="/learn-repo/assets/js/1.7fd08403.js" defer></script><script src="/learn-repo/assets/js/15.69afa17f.js" defer></script>
  </body>
</html>
